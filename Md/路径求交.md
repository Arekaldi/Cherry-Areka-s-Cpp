

> You know?
>
> What do it attract you is what you like.
>
> If you don't like it,
>
> Just turn back,
>
> Then continue on another road to go through,
>
> And you will get the great Extrication.

### 现有路径 $(a, b)$，$(c, d)$，要求求出两条路径的交点。

- 首先考虑两条路径只有三种情况
  1. 不相交。
  2. 交集部分完全位于 $a,b$​ 以 $\text{lca}$​ 为分割的某一半内。
  3. 交集穿过 $a,b$ 的 $\text{lca}$。

- 如果对 $a,b,c,d$ 四点分别两两求 $\text{lca}$ 的话，一定有两点满足 $p=lca(a,b),q=lca(c,d)$ (取两点深度较小的即可)
- 若 $p \neq q$，则 $(a,b)、(c,d)$ 相交，$p,q$ 即为交点的两端
- 若 $p = q$，有两种情况。
  1. 路径相交，交于一点，此时 $p = q = l$​​ ($l$​​ 为深度最小的六个 $\text{lca}$​)。
  2. 路径不相交，此时 $dep_p = dep_q < l$。

